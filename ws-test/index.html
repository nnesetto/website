<!DOCTYPE html>

<body>
  <script>
    if (window.WebSocket === undefined) {
      console.log("sockets not supported")
    } else {
      window.addEventListener("load", onLoad, false);
    }

    function onLoad() {
      let wsUri = "wss://testws.simplex.im:80";
      // let wsUri = "wss://188.166.8.35:80";
      socket = new WebSocket(wsUri);
      socket.onopen = function (evt) { onOpen(evt) };
      socket.onclose = function (evt) { onClose(evt) };
      socket.onmessage = function (evt) { onMessage(evt) };
      socket.onerror = function (evt) { onError(evt) };
    }

    function onOpen(evt) {
      console.log("[open] Connection established");
    }

    function onMessage(evt) {
      console.log(`[message] Data received from server: ${evt.data}`);
    }

    function onClose(evt) {
      if (evt.wasClean) {
        console.log(`[close] Connection closed cleanly, code=${evt.code} reason=${evt.reason}`);
      } else {
        // e.g. server process killed or network down
        // evt.code is usually 1006 in this case
        console.log(`[close] Connection died, code=${evt.code} reason=${evt.reason}`);
      }
    }

    function onError(evt) {
      console.log(`[error] ${evt.message}`);
    }
  </script>
</body>